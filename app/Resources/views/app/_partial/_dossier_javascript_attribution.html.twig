<script>
    $(document).ready(function () {

        var DossierRc = DossierRc || {};
        var ids = [];

        DossierRc.refreshAction = function () {

            if ($('input.action-checkbox:checked').length > 0) {
                $('#attribuerAction').removeClass('btn-default').addClass('btn-info').removeAttr('disabled');
                $('.footer-fixed:hidden').removeClass('hidden').show();
            }
            else {
                $('#attribuerAction').removeClass('btn-info').addClass('btn-default').attr('disabled', 'disabled');
                $('.footer-fixed').fadeOut();
            }
        };

        DossierRc.init = function () {
            $('input.action-checkbox').on('click', function () {
                DossierRc.refreshAction();
            });

            $('#attribuerAction').on('click', function () {
                if ($('input.action-checkbox:checked').length > 0) {
                    ids = [];
                    $('input.action-checkbox:checked').each(function () {
                        ids.push($(this).val());
                    });
                    document.location.href = Routing.generate('dossier.attribuer', {ids: ids.join(',')});
                }
            });

            $('#checkAllToggle').on('click', function () {
                $('input.action-checkbox').prop('checked', $(this).prop("checked"));
                DossierRc.refreshAction();
            });
        };

        $('#attribuerAction').on('click', function () {
            if ($('input.action-checkbox:checked').length > 0) {
                ids = [];
                $('input.action-checkbox:checked').each(function () {
                    ids.push($(this).val());
                });
                document.location.href = Routing.generate('dossier.attribuer', {ids: ids.join(',')});
            }
        });

        DossierRc.init();
        DossierRc.refreshAction();

    });
</script>
