{% set itemColor = 'default' %}
{% if data.dateHeure|date('Y-m-d H:i:s') > 'now'|date('Y-m-d H:i:s') %}
    {% set itemColor = 'success' %}
{% endif %}

<li class="list-group-item list-group-item-{{ itemColor }}">
    <div class="btn-group pull-right">

        <a class="btn btn-info btn-sm" href="{{ url('rdv.edit', {'id': data.id}) }}">
            {{ icone_modifier() }}
            <span class="sr-only">{{ 'action.edit'|trans }}</span>
        </a>
        <button type="button" class="btn dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"
                aria-expanded="false">
            <span class="caret"></span>
            <span class="sr-only">Toggle Dropdown</span>
        </button>
        <ul class="dropdown-menu">
            <li>
                <a class="btn btn-danger" href="#" data-toggle="modal" data-target="#modalDeleteRdv{{ data.id }}">
                    {{ icone_supprimer() }}
                    <span>{{ 'action.delete'|trans }}</span>
                </a>
            </li>
        </ul>
    </div>
    <div class="list-group-item-heading">
        {{ icone_creer_rdv() }}
        <span class="data-title">Rdv le {{ data.dateHeure|localizeddate('long', 'short') }}</span>
        <span class="badge">{{ appel.createdBy.trigramme|default('') }}</span>
    </div>
    <div class="list-group-item-content">
        <div class="contacts">
            {% for contact in data.contacts %}
                {{ contact.libelle }}{% if not loop.last %}, {% endif %}
            {% endfor %}
        </div>
        <div class="preparation">
            {{ data.preparation|raw }}
        </div>
        <div class="compterendu">
            {{ data.compteRendu|raw }}
        </div>
        <div class="lieu text-muted">
            {{ data.adresse }} {{ data.ville.cp }} {{ data.ville }}
        </div>
    </div>

    <div class="text-left modal fade" id="modalDeleteRdv{{ data.id }}" tabindex="-1" role="dialog"
         aria-labelledby="modalDeleteRdv{{ data.id }}">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header bg-danger">
                    <button type="button" class="close" data-dismiss="modal" aria-label="{{ 'action.close'|trans }}">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <h4 class="modal-title" id="modalLabelDeleteRdv{{ data.id }}">
                        {{ 'app.rdv.liste.modalLabelDelete'|trans }}
                    </h4>
                </div>
                <div class="modal-body">
                    <p class="text-danger">
                        {{ 'app.rdv.liste.modalBodyDelete'|trans }}
                    </p>
                </div>
                <div class="modal-footer">
                    {{ form_start(disableForm) }}
                    {{ form_rest(disableForm) }}
                    {{ button_cancel(true) }}
                    {{ button_delete('submit_delete_rdv'~data.id, true, 'submit') }}
                    {#{{ link_default(path('email.creer', urlDeleteParameters), 'app._partial._dossier_panel_rdv.supprimer_et_email_annulation'|trans, icone_creer_email(true)) }}#}
                    {{ link_default(path('rdv.delete.email.creer', {id: data.id, etapeId: etapeId}), 'app._partial._dossier_panel_rdv.supprimer_et_email_annulation'|trans, icone_creer_email(true)) }}
                    {{ form_end(disableForm) }}
                </div>
            </div>
        </div>
    </div>

</li>
